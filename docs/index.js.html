<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>mr-doc</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/cayman.min.css">
    <link rel="stylesheet" href="css/prism.min.css">
    <link rel="stylesheet" href="css/index.min.css">
    <link rel="stylesheet" href="css/docs.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Mr. Doc</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>mr-doc</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li><a href="index.html">Main</a></li>
            <li class="active"><a href="index.js.html">index.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
              <li><a href="#EventFrame"><i class="alert alert-info"></i><span>EventFrame</span></a>
              </li>
              <li><a href="#start"><i class="alert alert-info"></i><span>start</span></a>
              </li>
              <li><a href="#stop"><i class="alert alert-info"></i><span>stop</span></a>
              </li>
              <li><a href="#on"><i class="alert alert-info"></i><span>on</span></a>
              </li>
              <li><a href="#off"><i class="alert alert-info"></i><span>off</span></a>
              </li>
              <li><a href="#emit"><i class="alert alert-info"></i><span>emit</span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="span9">
          <section id="EventFrame">
            <h1>EventFrame</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>EventFrame()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>options</td>
                <td>object</td>
                <td><p>All constructor options are specified in this object</p></td>
              </tr>
              <tr>
                <td>options.frame</td>
                <td>HTMLIFrameElement, Window</td>
                <td><p>The <code>iframe</code>, popup, or <code>Window</code> to create a connection with.</p></td>
              </tr>
              <tr>
                <td>options.origin</td>
                <td>string</td>
                <td><p>Restrict events to an exact origin. An origin consists of the protocol, host, and port. Defaults to <code>*</code> which applies to any origin.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>The constructor for <code>EventFrame</code> instances. It requires a reference to the frame or window that you want to connect with.</p></div>
          <pre><code class="language-javascript">function EventFrame (options) {
  var self = this
  var listeners = {}
  var callbacks = {}
  var origin = options.origin || '*'
  var frame = options.frame

  if (frame == null) {
    throw new Error('options.frame is required.')
  }
  if (frame instanceof root.HTMLIFrameElement) {
    frame = frame.contentWindow
  }
  if (typeof frame.postMessage !== 'function') {
    throw new Error('options.frame does not support postMessage.')
  }

  function onmessage (e) {
    var data

    if (e.source !== frame) { return }
    if (origin !== '*' &amp;&amp; e.origin !== origin) { return }
    if (e.data.substr(0, pragma.length) !== pragma) { return }

    try {
      data = JSON.parse(e.data.substr(pragma.length))
    } catch (_) { return }

    if (data.event) {
      onevent(e, data)
    } else if (data.reply) {
      onreply(data)
    }
  }

  function onevent (e, data) {
    var i, callback

    if (!listeners[data.event]) { return }

    if (data.callback) {
      callback = function () {
        var reply = {
          reply: data.callback,
          args: Array.prototype.slice.call(arguments)
        }

        reply = pragma + JSON.stringify(reply)
        e.source.postMessage(reply, e.origin)
      }
      data.args.push(callback)
    }

    for (i = 0; i &lt; listeners[data.event].length; i++) {
      listeners[data.event][i].apply(null, data.args)
    }
  }

  function onreply (data) {
    callbacks[data.reply].apply(null, data.args)
    delete callbacks[data.reply]
  }</code></pre>
          <h3 class="muted">Example</h3>
          <pre><code class="language-javascript">var eventFrame = new EventFrame({
  frame: document.querySelector('iframe#my-iframe-id'),
  origin: 'https://example.com'
});</code></pre>
          <section id="start">
            <h1>start</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>start()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>win</td>
                <td>Window</td>
                <td><p>The browser window on which to listen to incoming <code>message</code> events.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Begin listening for incoming events from the given frame.<br />Normally you will not need to execute this method, as the constructor<br />calls it implicitly</p></div>
          <pre><code class="language-javascript">function start (win) {
  addEventListener(win || root, 'message', onmessage)
  return self
}</code></pre>
          <section id="stop">
            <h1>stop</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>stop()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>win</td>
                <td>Window</td>
                <td><p>The browser window on which to stop listening to incoming <code>message</code> events.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Stop listening for incoming events from the given frame.<br />This is good for &quot;teardown&quot; purposes.</p></div>
          <pre><code class="language-javascript">function stop (win) {
  removeEventListener(win || root, 'message', onmessage)
  return self
}</code></pre>
          <section id="on">
            <h1>on</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>on()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>event</td>
                <td>string</td>
                <td><p>The name of the event to add a listener for.</p></td>
              </tr>
              <tr>
                <td>listener</td>
                <td>function</td>
                <td><p>The function to handle the incoming event.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Register a <code>listener</code> to handle an incoming <code>event</code>.</p></div>
          <pre><code class="language-javascript">function on (event, listener) {
  listeners[event] = listeners[event] || []
  listeners[event].push(listener)
  return self
}</code></pre>
          <h3 class="muted">Example</h3>
          <pre><code class="language-javascript">eventLine.on('myEventName', function () {
  console.log('recieved the following arguments:', arguments);
});</code></pre>
          <pre><code class="language-javascript">// With a callback
eventLine.on('myEventName', function (data, callback) {
  console.log('recieved the following data:', data);
  callback('Thank you very much for your data');
});</code></pre>
          <section id="off">
            <h1>off</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>off()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>event</td>
                <td>string</td>
                <td><p>The name of the event to remove a listener from.</p></td>
              </tr>
              <tr>
                <td>listener</td>
                <td>function</td>
                <td><p>The function that handles the incoming event.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Unregister a <code>listener</code> that handles an incoming <code>event</code>.</p></div>
          <pre><code class="language-javascript">function off (event, listener) {
  var i
  var eventListeners = listeners[event]

  if (!eventListeners) { return self }

  for (i = 0; i &lt; eventListeners.length; i++) {
    if (eventListeners[i] === listener) {
      eventListeners.splice(i, 1)
      return self
    }
  }
}</code></pre>
          <h3 class="muted">Example</h3>
          <pre><code class="language-javascript">var event = 'myEventname'
var listener = function () {
  console.log('recieved the following arguments:', arguments);
}
eventLine.on(event, listener);
eventLine.off(event, listener);</code></pre>
          <section id="emit">
            <h1>emit</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>emit()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>event</td>
                <td>string</td>
                <td><p>The name of the event to emit.</p></td>
              </tr>
              <tr>
                <td>argument</td>
                <td></td>
                <td><p>Zero or more arguments to pass along with the event.</p></td>
              </tr>
              <tr>
                <td>callback</td>
                <td>function</td>
                <td><p>A callback that can be invoked from the listener on the receiving side of the event.<br />The callback must be the last parameter given.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>emit an <code>event</code>, optionally with data.</p></div>
          <pre><code class="language-javascript">function emit (event) {
  var id, message
  var data = {
    event: event,
    args: Array.prototype.slice.call(arguments, 1)
  }
  var callback = data.args[data.args.length - 1]

  if (typeof callback === 'function') {
    id = uuid()
    callbacks[id] = callback
    data.callback = id
    data.args.pop()
  }

  message = pragma + JSON.stringify(data)
  frame.postMessage(message, origin)
  return self
}

this.start = start
this.stop = stop
this.on = on
this.off = off
this.emit = emit

start()
  }

  return EventFrame
})</code></pre>
          <h3 class="muted">Example</h3>
          <pre><code class="language-javascript">// Emit an event with no arguments
eventLine.emit('just letting you know');</code></pre>
          <pre><code class="language-javascript">// Emit an event with some data
eventline.emit('My name is', name);</code></pre>
          <pre><code class="language-javascript">// Emit an event with a callback
eventline.emit('What did you have for dinner?', function (item) {
  console.log('They had', item, 'for dinner');
});</code></pre>
          <pre><code class="language-javascript">// Emit an event with data and a callback
eventline.emit('Here is my key. Can I have yours?', myFakeKey, function (theirKey) {
  console.log('Muahah, my key was fake. Here is theirs:', theirKey);
});</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/mr-doc/mr-doc">Mr. Doc </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Mr. Doc is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des réseaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="js/twitter-widget.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap-transition.min.js"></script>
    <script src="js/bootstrap-scrollspy.min.js"></script>
    <script src="js/bootstrap-dropdown.min.js"></script>
    <script src="js/bootstrap-collapse.min.js"></script>
    <script src="js/bootstrap-affix.min.js"></script>
    <script src="js/prism.min.js"></script>
    <script src="js/index.min.js"></script>
  </body>
</html>